<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>sfg;skm</title>
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
		<link rel="stylesheet" href="core.css">
		<meta name="google-signin-client_id" content="901409010191-fh44qef7jm9jniv1h13etlpg35lgqi63.apps.googleusercontent.com">


		<script src="https://www.gstatic.com/firebasejs/3.9.0/firebase.js"></script>
		<script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyCem7c3julHajYjuPi5dpwBF7FisO5mVBA",
                authDomain: "whatsinmyfridge-b1f71.firebaseapp.com",
                databaseURL: "https://whatsinmyfridge-b1f71.firebaseio.com",
                projectId: "whatsinmyfridge-b1f71",
                storageBucket: "whatsinmyfridge-b1f71.appspot.com",
                messagingSenderId: "981344901205"
            };
            firebase.initializeApp(config);
		</script>
		<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
		<script>
            $(function () {
                $("[data-role=panel]").panel().enhanceWithin();
            });


		</script>
		<script>
            var provider = new firebase.auth.GoogleAuthProvider();

            firebase.auth().getRedirectResult().then(function(result) {
                if (result.credential) {
                    // This gives you a Google Access Token. You can use it to access the Google API.
                    var token = result.credential.accessToken;
                    // ...
                }
                // The signed-in user info.
                var user = result.user;
            }).catch(function(error) {
                // Handle Errors here.
                var errorCode = error.code;
                var errorMessage = error.message;
                // The email of the user's account used.
                var email = error.email;
                // The firebase.auth.AuthCredential type that was used.
                var credential = error.credential;
                // ...
            });
		</script>
		<script>
            $("#logout-btn").removeClass("hidden");
            firebase.auth().onAuthStateChanged(
                function(user) {
					if (user) {
						// User is signed in.
						var displayName = user.displayName;
						var email = user.email;
						var emailVerified = user.emailVerified;
						var photoURL = user.photoURL;
						var isAnonymous = user.isAnonymous;
						var uid = user.uid;
						var providerData = user.providerData;
						// ...
						alert("logged in");
						$(function(){
                            $("#login-btn").hide();
                            $("#signup-btn").hide();
                            $("#logout-btn").show();
                            $.mobile.navigate("#fridge");
						})


					} else {
                    // User is signed out.
                    // ...
						alert("not logged in");
						$(function () {
                            $("#signup-btn").show();
                            $("#logout-btn").hide();
                            $("#login-btn").show();
                            $("#fridge-btn").hide();
                            $("#settings-btn").hide();
                            $("#shopping-list-btn").hide();
                            $.mobile.navigate("#login");
                        })
                	}
				}
			);


		</script>

	</head>
	<body>
	<div id="override">
		<div data-role="page" id="login">
			<div data-role="header">
				<div class="nav">
					<a href="#defaultpanel" class="nav-button ui-large-icon ui-btn ui-alt-icon ui-nodisc-icon ui-btn-inline ui-btn-icon-notext ui-icon-bars">Default panel</a>
					<h1>Login</h1>
				</div>
			</div>
			<div role="main" class="ui-content">
				<div class="top-hr"></div>
				<br>
				<form method="post" id="login-form">
					<label class="text-input-label" for="login-email">Email:</label>
					<div class="text-input-container">
						<input id="login-email" name="username" type="text" value="">
					</div>
					<label class="text-input-label" for="login-password">Password:</label>
					<div class="text-input-container">
						<input id="login-password" name="password" type="password" value="">
					</div>
					<input type="submit" value="Login">
					<script>
                        $("#login-form").submit(
                            function(){
                                firebase.auth().signInWithEmailAndPassword($("#login-email").val(), $("#login-password").val()).catch(function(error){
                                var errorCode = error.code;
                                var errorMessage = error.message;
                                alert(errorMessage);
								alert(errorCode);
                            })})
					</script>
				</form>
				<br>
				<button id="google-btn">Sign in with Google</button>
				<script>
                    $("#google-btn").click(function () {
                        firebase.auth().signInWithRedirect(provider);
                    });
				</script>
				<br>
				<a href="#signup">dont have an account?</a>
			</div>
			<div data-role="footer">
			</div>
		</div><!-- page login -->

		<div data-role="page" id="signup">
			<div data-role="header">
				<div class="nav">
					<a href="#defaultpanel" class="nav-button ui-large-icon ui-btn ui-alt-icon ui-nodisc-icon ui-btn-inline ui-btn-icon-notext ui-icon-bars">Default panel</a>
					<h1>Signup</h1>
				</div>
			</div>
			<div role="main" class="ui-content">
				<div class="top-hr"></div>

				<form method="post" id="signin">
					<label for="signup-email">email:</label>
					<input id="signup-email" name="username" type="text" value="">
					<label for="signup-password">Password:</label>
					<input id="signup-password" name="password" type="password" value="">
					<input type="submit" value="submit">
					<script>
						$("#signin").submit(
						    function(){firebase.auth().createUserWithEmailAndPassword($("#signup-email").val(), $("#signup-password").val()).catch(function(error){
						  	  var errorCode = error.code;
						  	  var errorMessage = error.message;
                               alert(errorMessage);
                               alert(errorCode);
						})})
					</script>
				</form>

			</div>
			<div data-role="footer">
			</div>
		</div><!-- page signup -->

		<div data-role="page" id="fridge">
			<div data-role="header">
				<div class="nav">
					<a href="#defaultpanel" class="nav-button ui-large-icon ui-btn ui-alt-icon ui-nodisc-icon ui-btn-inline ui-btn-icon-notext ui-icon-bars">Default panel</a>
					<h1>Fridge</h1>
					<a href="#" class="sort-button ui-btn">Sort</a>
				</div>
			</div>
			<div role="main" class="ui-content">

				<div class="top-hr"></div>
				<div class="item-list">
					<a href="#item-popup" data-rel="popup" class="list-item ui-btn"><img src="icons/produce.png">
						<p class="item-name">Apple Apr-26</p>
						<p class="item-expires">Expires in 3 days</p>
						<div class="small-circle"></div>
					</a>
					<div data-role="popup" id="item-popup" data-overlay-theme="b" data-theme="b">
					</div>
					<div data-role="collapsible" data-inset="false">
						<h3>Produce</h3>
						<a href="#item-popup" data-rel="popup" class="list-item ui-btn"><img src="icons/produce.png">
							<p class="item-name">Apple Apr-26</p>
							<p class="item-expires">Expires in 3 days</p>
							<div class="small-circle"></div>
						</a><a href="#item-popup" data-rel="popup" class="list-item ui-btn"><img src="icons/produce.png">
						<p class="item-name">Apple Apr-26</p>
						<p class="item-expires">Expires in 3 days</p>
						<div class="small-circle"></div>
					</a><a href="#item-popup" data-rel="popup" class="list-item ui-btn"><img src="icons/produce.png">
						<p class="item-name">Apple Apr-26</p>
						<p class="item-expires">Expires in 3 days</p>
						<div class="small-circle"></div>
					</a>
					</div>
				</div>
				<a href="#" class="large-circle ui-alt-icon ui-nodisc-icon  ui-btn ui-icon-plus ui-btn-icon-notext">No text</a>
			</div>
			<div data-role="footer">
			</div>
		</div><!-- page fridge -->

		<div data-role="page" id="list">
			<div data-role="header">
				<div class="nav">
					<a href="#defaultpanel" class="nav-button ui-large-icon ui-btn ui-alt-icon ui-nodisc-icon ui-btn-inline ui-btn-icon-notext ui-icon-bars">Default panel</a>
					<h1>Shopping List</h1>
					<a href="#" class="sort-button ui-btn">Sort</a>
				</div>
			</div>
			<div role="main" class="ui-content">

				<div class="top-hr"></div>
				<div class="item-list">
					<a href="#item-popup2" data-rel="popup" class="ui-btn"><img src="icons/produce.png">
						<p class="item-name">Apple Apr-26</p>
						<p class="item-expires">Expires in 3 days</p>
						<div class="small-circle"></div>
					</a>
					<div data-role="popup" id="item-popup2" data-overlay-theme="b" data-theme="b">
					</div>
				</div>
				<a href="#" class="large-circle ui-alt-icon ui-nodisc-icon  ui-btn ui-icon-plus ui-btn-icon-notext">No text</a>
			</div>
			<div data-role="footer">
			</div>
		</div><!-- page list -->

		<div data-role="page" id="settings">
			<div data-role="header">
				<div class="nav">
					<a href="#defaultpanel" class="nav-button ui-large-icon ui-btn ui-alt-icon ui-nodisc-icon ui-btn-inline ui-btn-icon-notext ui-icon-bars">Default panel</a>
					<h1>Settings</h1>
				</div>
			</div>
			<div role="main" class="ui-content">
				<div class="top-hr"></div>
				<form>
					<label id="measurement-label" for="flip-metric-imperial">Measurement type:</label>
					<input type="checkbox" data-role="flipswitch" name="measurement-type" id="flip-metric-imperial" data-on-text="Imperial" data-off-text="Metric" data-wrapper-class="custom-size-flipswitch">
				</form>
				<form>
					<div data-role="">
						<label class="text-input-label" for="email-link">Email:</label>
						<div class="text-input-container">
							<input id="email-link" name="email" type="text" value="">
							<button onclick="">Link Email</button>
						</div>
					</div>
				</form>
			</div>
			<div data-role="footer">
			</div>
		</div><!-- page settings -->

		<div data-role="page" id="about">
			<div data-role="header">
				<div class="nav">
					<a href="#defaultpanel" class="nav-button ui-large-icon ui-btn ui-alt-icon ui-nodisc-icon ui-btn-inline ui-btn-icon-notext ui-icon-bars">Default panel</a>
					<h1>About</h1>
				</div>
			</div>
			<div role="main" class="ui-content">
				<div class="top-hr"></div>

			</div>
			<div data-role="footer">
			</div>
		</div><!-- page about -->

		<div data-role="panel" id="defaultpanel" data-theme="a" data-display="overlay" class="ui-panel ui-panel-position-left ui-body-inherit ui-panel-animate ui-panel-closed">
			<p id="logo" >WhatsinmyFridge.com</p>
			<a id="fridge-btn" href="#fridge" data-transition="slide" class="nav-btn ui-btn">Fridge</a>
			<a id="shopping-list-btn" href="#list" data-transition="slide" class="nav-btn ui-btn">Shopping List</a>
			<a id="settings-btn" href="#settings" data-transition="slide" class="nav-btn ui-btn">Settings</a>
			<a id="about-btn" href="#about" data-transition="slide" class="nav-btn ui-btn">About</a>
			<a id="login-btn" data-transition="slide" href="#login" class="nav-btn ui-btn">Login</a>
			<!--<a id="signup-btn" data-transition="slide" href="#signup" class="nav-btn ui-btn">Sign Up</a>-->
			<a id="logout-btn" href="#" class="nav-btn ui-btn">Logout</a>

		</div>

	</div>
	<script>

        $("#logout-btn").click(function () {
            firebase.auth().signOut().then(function() {
                // Sign-out successful.
            }).catch(function(error) {
                // An error happened.
            });
        });

	</script>
	</body>
</html>